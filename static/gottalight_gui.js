
document.getElementById("amount").value =1000;
document.getElementById("label").value = new Date().toLocaleString();
document.getElementById("desc").value = "generated by GottaLight";
document.getElementById("riskfactor").value =1;
document.getElementById("bolt11").value ="";

function getinfo(){
	window.location = "getinfo";
}
function listpeers(){
	window.location = "listpeers";
}
function listfunds(){
	window.location = "listfunds";
}
function listinvoices(){
	window.location = "listinvoices";
}

function pay(){
  
	openDialog("pay Invoice");
	var bolt11 = document.getElementById("bolt11");
	var bolt11_val = bolt11.value;
	$.get("pay?bolt11="+bolt11_val,
		function( data ) {
		  openDialog("pay Invoice",data[1]+": "+data[0].message);
		}
	);
}

function delexpiredinvoice(){
	openDialog("Delete Expired Invoice");
	$.get("delexpiredinvoice",
		function( data ) {
		  openDialog("Delete Expired Invoices",data[1]+": "+data[0].message);
		}
	);
}


function generateinvoice(){
	document.getElementById("label").value = new Date().toLocaleString();
	openDialog("Generate Invoice");
	var amount = document.getElementById("amount");
	var label = document.getElementById("label");
	var desc = document.getElementById("desc");
	var amount_val = amount.value;
	var label_val = label.value;
	var desc_val = desc.value;


	$.get("invoice?amount="+amount_val+"&label="+label_val+"&desc="+desc_val,
		function( data ) {
			if (data[1]=="ERROR") {
				openDialog("Generate Invoice",data[1]+": "+data[0].message);
			}
			else {
				openDialog("Generate Invoice","bolt11: "+data[0]);
			}

		}
	);

}
function generateinvoiceQR(){

	document.getElementById("label").value = new Date().toLocaleString();
	var amount = document.getElementById("amount");
	var label = document.getElementById("label");
	var desc = document.getElementById("desc");
	var amount_val = amount.value;
	var label_val = label.value;
	var desc_val = desc.value;

	openDialog("Generate Invoice QR");

	$.get("invoiceqr?amount="+amount_val+"&label="+label_val+"&desc="+desc_val,
		function( data ) {
			if (data[1]=="ERROR")
			{
				openDialog("Generate Invoice QR",data[1]+": "+data[0].message);
			}
			else
			{
				var imgqr = document.getElementById("qrcode");
				imgqr.src=data[0];
				imgqr.width="300";
			}

		}
	);

}

function connect(){
	var id = document.getElementById("connect_node_id");
	var id_val = id.value;
	openDialog("Connect to Node");
	$.get("connect?id="+id_val,
		function( data ) {
		  openDialog("Connect to Node",data[1]+" "+data[0].message);
		}
	);
}
function closeid(){
	var id = document.getElementById("close_node_id");
	var id_val = id.value;
	openDialog("Close Channel");
	$.get("close?id="+id_val,
		function( data ) {
		  openDialog("Close Channel",data[1]+" "+data[0].message);
		}
	);
}
function disconnectid(){
	var id = document.getElementById("disconnect_node_id");
	var id_val = id.value;
	openDialog("Disconnect Peer");
	$.get("disconnect?id="+id_val,
		function( data ) {
		  openDialog("Disconnect Peer",data[1]+" "+data[0].message);
		}
	);
}
function fundchannel(){
	var id = document.getElementById("fund_node_id");
	var id_val = id.value;
	var fund_amount = document.getElementById("fund_amount");
	var fund_amount_val = fund_amount.value;
	openDialog("Fund Channel");
	$.get("fundchannel?id="+id_val+"&amount="+fund_amount_val,
		function( data ) {
		  openDialog("Fund Channel",data[1]+" "+data[0].message);
		}
	);
}

function getroute(){
	var node_id = document.getElementById("node_id");
	var msatoshi = document.getElementById("msatoshi");
	var riskfactor = document.getElementById("riskfactor");
	var node_id_val = node_id.value;
	var msatoshi_val = msatoshi.value;
	var riskfactor_val = riskfactor.value;

	openDialog("Get Route to Node");
	$.get("getroute?node_id="+node_id_val+"&msatoshi="+msatoshi_val+"&riskfactor="+riskfactor_val,
		function( data ) {
		  openDialog("Get Route to Node",data[1]+" "+data[0].message);
		}
	);

}

function getlog(){
	window.location = "getlog";
}
function listconfigs(){
	window.location = "listconfigs";
}
function listforwards(){
	window.location = "listforwards";
}
function devrescanoutputs(){
	window.location = "devrescanoutputs";
}

$( function() {
	$( "#dialog" ).dialog({
		autoOpen: false,
		show: {
			effect: "blind",
			duration: 500
		},
		hide: {
			effect: "explode",
			duration: 500
		}
	});

	$( "#test" ).on( "click", function() {
		$( "#dialog" ).dialog( "open" );
	});
} );

function openDialog(title_text,data){

	$( "#dialog" ).dialog( "open" );
	$( "#dialog" ).dialog({ title: title_text });
	//document.getElementById("dialog").title="cioa";
	if (data==undefined)
	{
		document.getElementById("message").innerHTML='<img src="giphy.gif" id="qrcode">';
	}
	else
	{

		document.getElementById("message").innerHTML=data;
	}
}

